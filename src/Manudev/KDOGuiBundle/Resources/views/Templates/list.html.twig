<section id="content">

    <section id="giftListBaner" class="tp-banner section-intro">
        <div class="stellar bg-overlay" data-stellar-background-ratio="0.4"
             backround-img="" data-img="[[listCtrl.lists.picture.web_path ]]">
            <div class=" tp-dottedoverlay twoxtwo" ></div>
        </div>

        <div id="header-list-title" class="bg-overlay bg8 col-md-5 col-sm-8 mt20 mb20" style="z-index: 3">
            <h1 class="list-intro-title">[[listCtrl.lists.title ]]
                <small><br />[[listCtrl.lists.sub_title ]]</small></h1>
            <div class="list-intro-text">[[listCtrl.lists.description ]]</div>
            <div class="list-intro-share mt10">
                <ul class="social-icon social-bg circle">
                    <li data-toggle="tooltip" data-placement="bottom" data-original-title="Partager sur Facebook" data-title="Partager sur Facebook">
                        <a data-title="Partager sur Facebook"
                        data-container="body" data-toggle="popover" data-placement="right"
                        data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                        data-original-title="Partager sur Facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </li>
                    <li data-toggle="tooltip" data-placement="bottom" data-original-title="Partager sur Twitter"
                        data-title="Partager sur Twitter">
                        <a data-title="Partager sur Twitter"
                           data-container="body" data-toggle="popover" data-placement="right"
                           data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                           data-original-title="Partager sur Twitter">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </li>
                    <li data-toggle="tooltip" data-placement="bottom" data-original-title="Partager sur Google+"
                        data-title="Partager sur Google+">
                        <a data-title="Partager sur Google+"
                           data-container="body" data-toggle="popover" data-placement="right"
                           data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                           data-original-title="Partager sur Google+">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </li>
                    <li data-toggle="tooltip" data-placement="bottom" data-original-title="Obtenir le flux RSS"
                        data-title="Obtenir le flux RSS">
                        <a data-title="Obtenir le flux RSS"
                           data-container="body" data-toggle="popover" data-placement="right"
                           data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus."
                           data-original-title="Obtenir le flux RSS">
                            <i class="fa fa-rss"></i>
                        </a>
                    </li>
                    <li data-toggle="tooltip" data-placement="bottom" data-original-title="Envoyer par email"
                        data-title="Envoyer par email">
                        <a data-title="Envoyer par email"
                           data-container="body" data-toggle="popover" data-placement="right"
                           data-content="Form"
                           data-original-title="Envoyer par email">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </li>
                    <li data-toggle="tooltip" data-placement="bottom" data-original-title="Obtenir le lien"
                        data-title="Obtenir le lien">
                        <a data-title="Obtenir le lien"
                           data-container="body" data-toggle="popover" data-placement="right"
                           data-content="http://wwww"
                           data-original-title="Obtenir le lien">
                            <i class="fa fa-share-alt"></i>
                        </a>
                    </li>
                </ul>
            </div>
{#
            <a target="_blank"
               href="https://plus.google.com/share?url=http://k.loc/app_dev.php/gui/#/list/2"
               style="display: inline-block; background:#cc3732 ; width: 32px; height: 32px;
               padding-top: 6px; padding-left: 6px;">
                <i class="fa fa-google-plus" style="color:white; font-size:24px;"></i>
            </a>

            <a target="_blank"
               href="https://www.facebook.com/sharer/sharer.php?u=http://k.loc/app_dev.php/gui/#/list/2"
               style="display: inline-block; background:#4c66a4 ; width: 32px; height: 32px;
               padding-top: 6px; padding-left: 12px;">
                <i class="fa fa-facebook" style="color:white; font-size:24px;"></i>
            </a>

            <a target="_blank"
               href="https://twitter.com/intent/tweet?text=Kdolist http://k.loc/app_dev.php/gui/&#35;/list/2"
               style="display: inline-block; background:#0084B4 ; width: 32px; height: 32px;
               padding-top: 6px; padding-left: 6px;">
                <i class="fa fa-twitter" style="color:white; font-size:24px;"></i>
            </a>

            <a target="_blank"
               style="display: inline-block; background:#666666 ; width: 32px; height: 32px;
               padding-top: 8px; padding-left: 6px;">
                <i class="fa fa-envelope" style="color:white; font-size:20px;"></i>
            </a>

            <div
               style="display: inline-block; background:black; height: 32px;
               padding-left: 6px; padding-right: 12px;
               color:white; font-size:24px;">
                <i class="fa fa-share-alt" style="margin-top: 6px;"></i>
                <span style="font-size: 0.6em">http://k.loc/app_dev.php/gui/#/list/2</span>
            </div>
#}

        </div>
    </section>

    <section class="section-page">
        <div class="container">
            <div class="masonry">
                <gift-panel class="item" ng-repeat="gift in listCtrl.lists.gifts"
                            gift="gift"  ng-show="gift.percent_done + gift.percent_reserved < 100"></gift-panel>
            </div>
        </div>
    </section>

    <section class="section-page">
        <div class="container">
            <h1>Les cadeaux suivants sont réservés ou ont déjà été offerts</h1>
            <div class="masonry">
                <gift-panel class="item" ng-repeat="gift in listCtrl.lists.gifts"
                            gift="gift"  ng-show="gift.percent_done + gift.percent_reserved >= 100"></gift-panel>
            </div>
        </div>
    </section>

    <div class="modal fade in" id="modal" tabindex="-1" role="modal" id="listModal"
         aria-labelledby="modal-label" aria-hidden="true">
        <div class="modal-dialog  modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="modal-label">[[listCtrl.currentGift.name]]</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row">

                                <div class="col-md-6 col-sm12">
                                     <img ng-src="[[listCtrl.currentGift.picture.web_path]]"
                                             width="100%">
                                </div>

                                <div class="col-md-6 col-sm12">
                                    <div class="panel-body">
                                        <div>
                                            <div style="text-align: justify">
                                                <i class="fa fa-quote-left"></i>
                                                <i class="fa fa-quote-right"></i>
                                                [[listCtrl.currentGift.description ]]
                                            </div>
                                        </div>
                                        <div class="divider d4"><span><i class="fa fa-gift"></i></span></div>

                                        [[ listCtrl.currentGift.price ]]€
                                        ([[ listCtrl.currentGift.number_of_parts ]] <i class="fa fa-pie-chart"></i> parts de [[ listCtrl.currentGift.part_value ]] €)<br />

                                        <d-progress-bar gift="listCtrl.currentGift"></d-progress-bar>

                                    </div>
                                </div>

                            </div>
                            <div class="row mt20"
                                ng-show="listCtrl.currentGift.percent_done + listCtrl.currentGift.percent_reserved >= 100"
                                ng-hide="listCtrl.currentGift.percent_done + listCtrl.currentGift.percent_reserved < 100">
                                <div class="col-md-12">

                                    <div class="panel panel-info">
                                        <h5 class="modal-title" id="modal-label">
                                            Offrir
                                        </h5>
                                        <div class="row panel-body">
                                            Ce cadeau a déjà été offert ou est réservé.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt20"
                                ng-show="listCtrl.currentGift.percent_done + listCtrl.currentGift.percent_reserved < 100"
                                ng-hide="listCtrl.currentGift.percent_done + listCtrl.currentGift.percent_reserved >= 100">
                                <div class="col-md-12">

                                    <div class="panel panel-info">
                                        <h5 class="modal-title" id="modal-label">
                                            Offrir
                                        </h5>
                                        <div class="row panel-body">
                                            <div class="col-md-7">
                                                <p class="text-align: justify">
                                                    Afin d'offrir un cadeau, un email va vous être envoyé.<br>
                                                    Dans celui-ci, vous devrez confirmer votre cadeau et celui-ci sera alors enlevé de la liste des souhaits.<br>
                                                    Personne d'autre ne pourra alors l'offrir.
                                                </p>
                                            </div>
                                            <div class="col-md-5">
                                                <form id="formGiveGift" name="formGiveGift" method="post" action=""
                                                      ng-submit="sendGift()"
                                                      class="form-horizontal" novalidate>
                                                    {#
                                                    <div ng-message="required">Champ requis</div>
                                                    <div ng-message="email">E-mail non valide</div>
                                                    <div ng-message="number">Caractères alphabétiques non autorisés</div>
                                                    #}
                                                    {#
                                                    [[ formGiveGift.firstName.$valid ]]
                                                    [[ formGiveGift.firstName.$invalid ]]
                                                    [[ formGiveGift.firstName.$pristine ]]
                                                    [[ formGiveGift.firstName.$dirty ]]

                                                    <pre>erreur = [[ formGiveGift.firstName.$error | json ]]</pre>

                                                    <div ng-messages="formGiveGift.firstName.$error"
                                                         ng-messages-include="erreurs.html"></div>
                                                    #}
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="col-sm-12">
                                                                <div class="form-group"
                                                                     ng-class="{'has-error':formGiveGift.firstName.$dirty && formGiveGift.firstName.$invalid,
                                                                                'has-success':formGiveGift.firstName.$valid}">
                                                                    <input type="text" name="firstName" placeholder="Prénom"
                                                                           class="form-control"
                                                                           required
                                                                           ng-minlength="3"
                                                                           ng-model="listCtrl.givedGift.firstName">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="col-sm-12">
                                                                <div class="form-group"
                                                                     ng-class="{'has-error':formGiveGift.lastName.$dirty && formGiveGift.lastName.$invalid,
                                                                                'has-success':formGiveGift.lastName.$valid}">
                                                                    <input type="text"name="lastName" placeholder="Nom"
                                                                           class="form-control"
                                                                           required
                                                                           ng-minlength="3"
                                                                           ng-model="listCtrl.givedGift.lastName">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <div class="col-sm-12">
                                                                <div class="form-group"
                                                                     ng-class="{'has-error':formGiveGift.email.$dirty && formGiveGift.email.$invalid,
                                                                                'has-success':formGiveGift.email.$valid}">
                                                                    <input type="email" name="email" placeholder="Email"
                                                                           class="form-control"
                                                                           required
                                                                           ng-pattern="/^[a-zA-Z]+[a-zA-Z0-9._]+@[a-z]+\.[a-z.]{2,5}$/"
                                                                           ng-model="listCtrl.givedGift.email">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <div class="form-group"
                                                                 ng-class="{'has-error':formGiveGift.numberOfParts.$dirty && formGiveGift.numberOfParts.$invalid,
                                                                                'has-success':formGiveGift.numberOfParts.$valid}">
                                                                <label class="col-sm-5 control-label lef">Nombre de parts</label>
                                                                <div class="col-sm-7" id="formNumberOfParts">
                                                                    <input type="number" name="numberOfParts"
                                                                           min="1"
                                                                           max="[[ listCtrl.currentGift.available_parts ]]"
                                                                           integer
                                                                           required
                                                                           class="form-control"
                                                                           value="[[listCtrl.givedGift.number]]"
                                                                           ng-pattern="/^[0-9]+$/"
                                                                           ng-model="listCtrl.givedGift.number">
                                                                        <span class="help-block"
                                                                              ng-show="formGiveGift.numberOfParts.$dirty && formGiveGift.numberOfParts.$invalid">
                                                                            Min : 1<br />Max : [[ listCtrl.currentGift.available_parts ]]
                                                                        </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            Prix total : [[ listCtrl.currentGift.price]]€<br>
                                                            Prix d'une part : [[ listCtrl.currentGift.part_value ]]€<br>
                                                            Nombre de part disponibles : [[listCtrl.currentGift.get_available_parts ]]<br>
                                                            Prix calculé :
                                                            <strong>
                                                                <span ng-show="formGiveGift.numberOfParts.$valid">[[listCtrl.givedGift.number ]]</span>
                                                                <span ng-show="formGiveGift.numberOfParts.$invalid">0</span>
                                                                * [[listCtrl.currentGift.part_value ]]€
                                                                = <span ng-show="formGiveGift.numberOfParts.$valid">[[ listCtrl.givedGift.number * listCtrl.currentGift.part_value ]]€</span>
                                                                  <span ng-show="formGiveGift.numberOfParts.$invalid">0€</span>
                                                            </strong>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <div class="col-sm-12">
                                                                <div class="form-group">
                                                                    <button id="submitFormOffer" type="button" class="btn btn-primary btn-block"
                                                                            ng-disabled="formGiveGift.$invalid">
                                                                        <i class="fa fa-gift"></i> Offrir
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-b" data-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>
</section>
</div>